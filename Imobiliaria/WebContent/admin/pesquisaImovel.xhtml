<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

	<ui:composition template="template.xhtml">
	
	<ui:define name="corpo">
	
		<h1>
			Sistema Imobiliário <small> Lista Imóveis </small>
			</h1>
			<ol class="breadcrumb">
	
			</ol>
			
			<center>
			
			<h:form id="imovel" prependId="false"> 
			
			<div class="row">
			    <div class="col-lg-4 text-center">
			            
			        <label style="margin-top: 10px;float: left;">Buscar por número de escritura:</label>
					<br />
					<h:inputText id="numEscritura" type="text" class="form-control" value="#{pesquisaImovelController.numEscritura}"/>		            	           
			    </div>
			          
			    <div class="col-lg-4 text-center">
			         
			         <br /> 	
			        <div class="control-group" style="margin-top: 15px;float:left;">				
			    		<div class="controls">
			    			<h:commandButton id="buscar" value="Buscar" styleClass="btn btn-primary" style="margin-right: 10px;width: 150px;">
			    				<f:ajax listener="#{pesquisaImovelController.buscarPorNumeroEscritura}" execute="imovel:numEscritura" render=":imovel" event="click" />
			    			</h:commandButton>
			    		</div>
			    	</div>			 
			                       
				</div>
				       
			</div><br /> <br />
			
			<div class="panel panel-primary" style="width: 1500px;">
				<div class="panel-heading">
					<h3 class="panel-title" >Lista de Imóveis</h3>
				</div>
					<div class="panel-body" >

			
				<h:dataTable id="lista" value="#{pesquisaImovelController.imovels}" var="imovel" styleClass="table table-hover">
					<h:column>
						<f:facet name="header">Numero Escritura</f:facet>
						<h:outputText value="#{imovel.numeroEscritura}" />
	                </h:column>

	                <h:column>
						<f:facet name="header"><h:outputText value="Endereço" /></f:facet>
						<h:outputText value="#{imovel.endereco}" />
	                </h:column>

	                <h:column>
						<f:facet name="header"><h:outputText value="UF" /></f:facet>
						<h:outputText value="#{imovel.uf}" />
	                </h:column>

	                <h:column>
						<f:facet name="header"><h:outputText value="CEP" /></f:facet>
						<h:outputText value="#{imovel.cep}">
							<f:convertNumber type="currency"  />
						</h:outputText>
	                </h:column>
	                
	                <h:column>
						<f:facet name="header"><h:outputText value="Bairro" /></f:facet>
						<h:outputText value="#{imovel.bairro}">
							<f:convertNumber type="currency"  />
						</h:outputText>
	                </h:column>
	                
	                <h:column>
						<f:facet name="header"><h:outputText value="Cidade" /></f:facet>
						<h:outputText value="#{imovel.cidade}">
						</h:outputText>
	                </h:column>
	                
	                <h:column>
						<f:facet name="header"><h:outputText value="Tamanho" /></f:facet>
						<h:outputText value="#{imovel.tamanho}">

						</h:outputText>
	                </h:column>
	                
	                 <h:column>
						<f:facet name="header"><h:outputText value="Quartos" /></f:facet>
						<h:outputText value="#{imovel.quartos}">
						</h:outputText>
	                </h:column>
	                
	                <h:column>
						<f:facet name="header"><h:outputText value="Salas" /></f:facet>
						<h:outputText value="#{imovel.salas}">
						</h:outputText>
	                </h:column>
	                <h:column>
						<f:facet name="header"><h:outputText value="Banheiros" /></f:facet>
						<h:outputText value="#{imovel.banheiros}">
						</h:outputText>
	                </h:column>
	                <h:column>
						<f:facet name="header"><h:outputText value="Vagas na Garagem" /></f:facet>
						<h:outputText value="#{imovel.vagasGaragem}">
						</h:outputText>
	                </h:column>
	                <h:column>
						<f:facet name="header"><h:outputText value="Situação" /></f:facet>
						<h:outputText value="#{imovel.situacao}">
						</h:outputText>
	                </h:column>
	                <h:column>
						<f:facet name="header"><h:outputText value="Finalidade" /></f:facet>
						<h:outputText value="#{imovel.finalidade}">
						</h:outputText>
	                </h:column>
	                <h:column>
						<f:facet name="header"><h:outputText value="Tipo de Imovel" /></f:facet>
						<h:outputText value="#{imovel.tipoImovel}">
						</h:outputText>
	                </h:column>
	                <h:column>
						<f:facet name="header"><h:outputText value="Valor do Imovel" /></f:facet>
						<h:outputText value="#{imovel.valorImovel}">
						</h:outputText>
	                </h:column>
	                <h:column>
						<f:facet name="header"><h:outputText value="Valor IPTU" /></f:facet>
						<h:outputText value="#{imovel.valorIptu}">
						</h:outputText>
	                </h:column>
	                
	                <h:column>
						<f:facet name="header" >
							<h:outputText value="Editar"/>
						</f:facet>
						<center>
						<p:button outcome="cadastroImovel" icon="ui-icon-pencil" title="Editar">
		    				<f:param name="imovel" value="#{imovel.id}" />
		    			</p:button>
						</center>
					</h:column>
					<h:column>
						<f:facet name="header" >
							<h:outputText value="Remover"/>
						</f:facet>
						<center>
						<p:commandButton id="excluir" icon="ui-icon-trash" oncomplete="confirmacao.show()" process="@this" >
							<f:setPropertyActionListener target="#{pesquisaImovelController.imovel}" value="#{imovel}" />
						</p:commandButton>
						</center>
					</h:column>
	                
				</h:dataTable>
			
			</div>
			
		</div>
		
		</h:form>
		
				<h:form id="dialog" prependId="false">
				
				<p:confirmDialog header="Exclusão do Imóvel" 
					message="Tem certeza que deseja excluir o imóvel?"
					widgetVar="confirmacao">
			
					<p:commandButton value="Sim" update=":imovel:lista" oncomplete="confirmacao.hide();}" action="#{pesquisaImovelController.excluirImovel()}" process="@this"/>
					<p:button value="Não" onclick="confirmacao.hide(); return false;" />
			
				</p:confirmDialog>
				
				</h:form>
		
		</center>
	
	</ui:define>
	
	</ui:composition>
</html>